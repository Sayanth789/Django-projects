{% extends "base.html" %}
{% block content %}

    <h1>Image bookmarked</h1>
    <div id="image-list">
        {% include "images/image/list_images.html" %}

    </div>
{% endblock %}    
<!-- This will hold the JS code for loading additional pages when scrolling to the bottom of the page. -->
 
{% block domready %}
<script>
    

var page = 1;
var emptyPage = false;
var blockRequest = false;

window.addEventListener('scroll', function(e) {
    var margin = document.body.clientHeight - window.innerHeight - 200;
    if (window.pageYOffset > margin && !emptyPage && !blockRequest) {
        blockRequest = true;
        page += 1;
        fetch('?images_only=1&page=' + page)
            .then(response => response.text())
            .then(html => {
                if (html === '') {
                    emptyPage = true;
                } else {
                    var imageList = document.getElementById('image-list');
                    imageList.insertAdjacentHTML('beforeEnd', html);
                    blockRequest = false;
                }
            });
    }
});
 /// Launch scroll event --
const scrollEvent = new Event('scroll');
window.dispatchEvent(scrollEvent);

</script>
{% endblock %}

//  This provide infinite scrolling functionality. 
//  Subtract 200 from the result , so that  the next page is loaded when the user is closer than 200 pixels to the bottom of the page.-->
 